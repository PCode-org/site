# 会话聊天

会话聊天面板是与 AI 进行对话交互的主要界面。

## 功能概述

会话聊天面板提供了以下功能：

- **实时对话**：与 AI 进行实时的文本对话
- **消息渲染**：以丰富的格式显示 AI 和用户的消息
- **工具调用**：显示 AI 调用的工具和函数
- **待办任务**：显示和管理对话中的待办任务
- **视图模式**：切换不同的消息显示模式

## 消息类型

### 用户消息

用户发送的消息显示在右侧，包含：

- 消息内容（支持 Markdown）
- 发送时间
- 消息状态（发送中、已发送等）

### AI 消息

AI 的回复显示在左侧，包含：

- 消息内容（支持增强 Markdown 和 Mermaid 图表）
- 消息生成时间
- 思考过程（如果启用）

### 系统消息

系统通知和状态更新消息，通常以特殊样式显示。

## 消息渲染

### Markdown 支持

聊天面板支持完整的 Markdown 语法：

- 标题、列表、引用
- 代码块（支持语法高亮）
- 链接和图片
- 表格
- 任务列表

### 增强渲染

- **Mermaid 图表**：支持流程图、序列图、甘特图等
- **语法高亮**：自动识别代码语言并高亮显示
- **LaTeX 公式**：支持数学公式渲染

## 工具调用显示

当 AI 调用工具时，聊天面板会显示：

- **工具名称**：被调用的工具或函数
- **参数**：传递给工具的参数
- **结果**：工具执行的返回值
- **状态**：调用成功或失败

点击工具调用卡片可以查看详细信息。

## 待办任务

AI 可以在对话中创建待办任务，这些任务会显示在聊天面板中：

- **任务状态**：待办、进行中、已完成
- **任务描述**：任务的详细说明
- **进度跟踪**：显示任务完成进度

## 视图模式

聊天面板支持多种视图模式：

- **标准视图**：常规的聊天界面布局
- **专注视图**：隐藏辅助信息，专注对话内容
- **详细视图**：显示更多的元数据和调试信息

## 交互功能

### 消息操作

- **复制**：复制消息内容到剪贴板
- **重新生成**：让 AI 重新生成回复
- **编辑**：编辑已发送的消息

### 代码操作

- **复制代码**：一键复制代码块内容
- **在 VS Code 中打开**：将代码发送到 VS Code

## 流式输出

AI 的回复以流式方式实时显示，提供更好的交互体验：

- 逐字显示生成的文本
- 实时渲染 Markdown 格式
- 显示生成进度指示器

## 对话历史

聊天面板自动保存对话历史：

- 消息按时间顺序排列
- 支持滚动查看历史消息
- 自动滚动到最新消息

## 相关功能

- [消息渲染](../conversation/message-rendering.md) - 了解消息渲染的详细功能
- [工具调用](../conversation/tool-calls.md) - 深入了解工具调用功能
- [待办任务](../conversation/todo-tasks.md) - 管理对话中的待办任务
- [视图模式](../conversation/view-modes.md) - 切换和使用不同的视图模式
