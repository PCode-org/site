# 并发管理

PCode 支持同时运行多个会话，并发管理功能帮助您有效地控制和管理这些并发会话。

## 功能概述

并发管理提供了以下功能：

- **并发限制设置**：设置允许同时运行的最大会话数
- **活跃会话监控**：实时查看当前活跃的会话
- **会话队列管理**：查看等待执行的会话队列
- **资源使用指示**：显示系统资源使用情况

## 并发限制

### 设置并发限制

您可以在配置面板中设置并发限制：

1. 打开 **配置面板**
2. 找到 **会话设置**
3. 设置 **最大并发会话数**

:::info 注意

并发限制应根据您的系统资源和 API 限制来设置。过高的并发数可能导致系统负载过高或 API 限流。

:::

### 并发限制对话框

当您尝试创建的新会话超过并发限制时，系统会显示并发限制对话框：

- 显示当前并发限制
- 显示当前活跃会话数
- 显示等待队列中的会话数
- 提供选项：等待、取消或调整限制

## 活跃会话监控

### 活跃会话面板

活跃会话面板显示所有正在运行的会话：

- **会话名称**：会话的标题
- **运行时间**：会话已运行的时间
- **状态**：当前处理状态
- **进度**：任务完成进度

### 活跃会话指示器

在多个位置显示活跃会话数量：

- **会话列表顶部**：显示活跃会话总数
- **状态栏**：显示系统级别的活跃会话数
- **电源指示器**：可视化的活跃会话指示

## 会话队列

当活跃会话数达到限制时，新会话会进入等待队列：

- **队列顺序**：按创建时间排序
- **自动启动**：当有会话完成时，队列中的下一个会话自动启动
- **队列管理**：可以调整队列顺序或取消等待的会话

## 并发强度分布

### 并发强度条

显示当前并发强度：

- **当前强度**：当前活跃会话数与限制的比率
- **颜色指示**：
  - 绿色：低负载
  - 黄色：中等负载
  - 红色：高负载

### 并发分布直方图

显示并发会话的时间分布：

- X 轴：时间
- Y 轴：活跃会话数
- 帮助识别使用模式和峰值时段

## 资源管理

### 电源指示器

电源指示器提供系统资源使用情况的直观显示：

- **活跃会话数**：当前运行的会话
- **电池状态**：模拟电池显示，表示系统"电量"
- **颜色编码**：
  - 绿色：资源充足
  - 黄色：资源使用中等
  - 红色：资源紧张

### 配置选项

您可以在配置面板中自定义电源指示器：

- 显示/隐藏指示器
- 设置警告阈值
- 自定义颜色方案

## 最佳实践

### 设置并发限制

1. **考虑系统资源**：根据 CPU、内存等硬件资源设置
2. **API 限制**：考虑 API 提供商的速率限制
3. **任务类型**：不同类型的任务可能需要不同的并发设置

### 监控活跃会话

- 定期检查活跃会话面板
- 关注长时间运行的会话
- 及时处理卡住的会话

### 管理等待队列

- 优先处理重要的会话
- 取消不需要的等待会话
- 根据需要调整并发限制

## 相关功能

- [会话列表](./session-list.md) - 查看和管理所有会话
- [使用统计](../statistics/usage-statistics.md) - 查看详细的使用统计数据
- [配置面板](../../configuration/config-panel.md) - 配置并发限制和其他设置
