# OpenSpec 提案概述

OpenSpec 是 PCode 的提案管理系统，帮助您结构化地规划、审查和执行软件变更。

## 什么是 OpenSpec？

OpenSpec（Open Specification）是一种开放的规范格式，用于：

- **结构化提案**：以标准化的格式描述软件变更
- **团队协作**：让团队成员可以审查和讨论提案
- **变更追踪**：跟踪从提案到实现的完整生命周期
- **自动化执行**：支持自动执行批准的变更

## OpenSpec 的优势

### 结构化流程

OpenSpec 提供了清晰的提案流程：

1. **创建提案**：描述变更需求
2. **审查讨论**：团队审查和讨论
3. **批准执行**：批准后自动执行
4. **归档记录**：保存提案和执行记录

### 可视化展示

- **流程图**：显示提案的处理流程
- **架构图**：展示系统架构变更
- **依赖图**：显示组件依赖关系
- **时间线**：展示执行计划

### 协作功能

- **注释**：在提案的任意位置添加注释
- **审查**：专门的审查界面和流程
- **讨论**：针对特定行的讨论
- **审批**：审批流程和状态跟踪

## 提案类型

### 功能提案

描述新功能的实现：

- 功能需求
- 实现方案
- 测试计划
- 发布计划

### Bug 修复提案

描述 Bug 的修复方案：

- Bug 描述
- 影响范围
- 修复方案
- 回归测试

### 重构提案

描述代码重构计划：

- 重构目标
- 重构范围
- 重构步骤
- 风险评估

### 文档提案

描述文档更新计划：

- 文档范围
- 更新内容
- 审查流程
- 发布计划

## 提案结构

一个标准的 OpenSpec 提案包含以下部分：

### 元数据

- **提案 ID**：唯一标识符
- **标题**：简短的提案标题
- **描述**：详细的提案描述
- **创建时间**：提案创建的时间
- **状态**：提案的当前状态

### 内容

- **变更描述**：详细的变更内容
- **影响范围**：变更影响的组件和模块
- **实现方案**：具体的实现方案
- **测试计划**：测试策略和计划
- **风险评估**：潜在风险和缓解措施

### 规范

- **规范文件**：OpenSpec 规范文件
- **流程图**：变更流程图
- **架构图**：系统架构图
- **其他图表**：其他支持的图表

## 提案生命周期

### 1. 创建 (Creating)

提案刚创建，内容正在编辑中：

- 编辑提案内容
- 添加图表和规范
- 准备提交审查

### 2. 优化中 (Optimizing)

系统正在优化提案内容：

- 自动分析提案
- 生成建议和优化
- 完善提案结构

### 3. 草稿 (Drafting)

提案内容正在草拟：

- 完善提案细节
- 添加图表和文档
- 准备审查

### 4. OpenSpec 处理中 (OpenSpecing)

正在生成 OpenSpec 规范：

- 分析提案内容
- 生成规范文件
- 创建流程图

### 5. 审查中 (Reviewing)

提案正在审查：

- 团队成员审查
- 添加注释和反馈
- 讨论和改进

### 6. 执行中 (Executing)

提案批准后正在执行：

- 执行变更任务
- 监控执行进度
- 报告执行状态

### 7. 执行完成 (Execution Completed)

变更执行完成：

- 验证执行结果
- 生成执行报告
- 准备归档

### 8. 归档中 (Archiving)

正在归档提案：

- 整理提案文档
- 生成归档记录
- 更新项目状态

### 9. 已归档 (Archived)

提案已归档：

- 保存提案记录
- 更新项目历史
- 完成生命周期

## 工作区类型

### 普通工作区

使用项目的默认工作区：

- 共享项目配置
- 使用项目分支
- 适合小型变更

### 独立工作区

为提案创建独立的工作区：

- 独立的 Git 分支
- 隔离的开发环境
- 适合大型变更

## 快速开始

### 创建第一个提案

1. 在会话列表中点击 **提案** 按钮
2. 填写提案信息：
   - 提案标题
   - 主要诉求（chief complaint）
   - 选择项目
   - 选择工作区类型
3. 点击 **创建**
4. 等待系统生成提案内容

### 查看提案

1. 在会话列表中选择提案会话
2. 切换到 **Info** 标签页
3. 查看提案的详细信息
4. 切换到 **OpenSpec 文件** 标签页查看规范文件

### 审查提案

1. 打开提案的 **审查** 标签页
2. 查看提案内容和注释
3. 添加您的注释和反馈
4. 参与讨论和改进

## 最佳实践

### 撰写提案

- **清晰的标题**：使用描述性的标题
- **详细的描述**：提供足够的背景信息
- **明确的目标**：清晰定义提案目标
- **可测试的方案**：确保方案可测试验证

### 审查提案

- **仔细阅读**：完整阅读提案内容
- **建设性反馈**：提供有建设性的意见
- **关注风险**：关注潜在风险和问题
- **及时响应**：及时处理审查请求

### 管理提案

- **定期更新**：定期更新提案状态
- **及时归档**：完成后及时归档
- **文档记录**：保持完整的文档记录
- **经验总结**：总结经验和教训

## 相关功能

- [创建提案](./creating-proposals.md) - 了解如何创建提案
- [提案图表](./diagrams.md) - 了解提案的可视化功能
- [注释功能](./annotations.md) - 了解如何在提案中添加注释
