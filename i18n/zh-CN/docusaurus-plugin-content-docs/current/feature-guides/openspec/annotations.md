# 注释功能

注释功能允许您在 OpenSpec 提案的任意位置添加注释、反馈和讨论。

## 功能概述

注释功能提供了以下功能：

- **行级注释**：在特定行添加注释
- **全局注释**：添加全局性的反馈
- **注释审查**：查看和管理所有注释
- **讨论线程**：针对注释进行讨论
- **状态标记**：标记注释的状态

## 注释类型

### 行级注释

在提案的特定行添加注释：

- **精确位置**：准确定位到特定行
- **上下文**：显示该行的上下文
- **讨论**：针对该行进行讨论

**使用场景**：
- 指出代码或文本中的问题
- 建议改进
- 询问细节

### 全局注释

添加针对整个提案的注释：

- **整体反馈**：对提案的整体意见
- **一般性问题**：不针对特定行的问题
- **建议和想法**：对提案的建议

**使用场景**：
- 提供整体反馈
- 提出一般性问题
- 分享想法和建议

## 添加注释

### 添加行级注释

1. 打开提案的 OpenSpec 文件
2. 悬停在要注释的行上
3. 点击出现的注释图标
4. 在弹出的输入框中输入注释
5. 点击 **提交**

### 添加全局注释

1. 打开提案的 **审查** 标签页
2. 找到 **全局注释** 部分
3. 在输入框中输入注释
4. 点击 **提交**

## 注释界面

### 注释列表

在提案的 **审查** 标签页中，可以看到所有注释：

- **注释内容**：注释的文本
- **注释位置**：注释所在的行（行级注释）
- **注释者**：添加注释的用户
- **时间**：注释添加的时间
- **状态**：注释的当前状态

### 注释状态

注释有以下状态：

- **待处理**：新添加的注释，等待处理
- **已接受**：注释已被接受并实施
- **已拒绝**：注释已被拒绝
- **已讨论**：注释已讨论，待决定

### 状态栏

状态栏显示提案的整体状态：

- **待处理注释数**：需要处理的注释数量
- **已解决注释数**：已解决的注释数量
- **进度指示**：视觉化的进度条

## 管理注释

### 查看注释

1. 打开提案的 **审查** 标签页
2. 浏览注释列表
3. 点击注释查看详情
4. 在文件中跳转到注释位置

### 回复注释

1. 点击注释展开详情
2. 在回复输入框中输入回复
3. 点击 **回复** 提交

### 更新注释状态

1. 点击注释的状态下拉菜单
2. 选择新的状态：
   - **待处理**：标记为待处理
   - **已接受**：标记为已接受
   - **已拒绝**：标记为已拒绝
   - **已讨论**：标记为已讨论

### 删除注释

1. 点击注释的删除按钮
2. 确认删除操作

:::caution 注意

删除注释是不可逆操作，请谨慎使用。

:::

## 注释讨论

### 讨论线程

每个注释都有自己的讨论线程：

- **原始注释**：第一个添加的注释
- **回复**：对该注释的回复
- **时间线**：按时间顺序显示

### 提及用户

在注释中可以提及其他用户：

- 使用 `@用户名` 格式
- 被提及的用户会收到通知
- 适合请求反馈或审查

### 代码片段

可以在注释中包含代码片段：

- 使用代码块格式
- 支持语法高亮
- 便于展示示例

## 注释预览

### 注释预览对话框

打开注释预览对话框可以：

- 查看注释的完整内容
- 查看该行的上下文
- 查看该行的代码或文本
- 快速回复和更新状态

### 快速操作

在预览对话框中可以：

- **回复**：快速回复注释
- **更新状态**：更改注释状态
- **跳转**：跳转到文件中的位置
- **关闭**：关闭预览对话框

## 注释过滤和排序

### 按状态过滤

- **显示全部**：显示所有注释
- **待处理**：仅显示待处理的注释
- **已解决**：仅显示已解决的注释
- **已讨论**：仅显示已讨论的注释

### 按作者过滤

- **全部作者**：显示所有作者的注释
- **我的注释**：仅显示自己添加的注释
- **特定作者**：显示特定作者的注释

### 排序选项

- **按时间**：按注释添加时间排序
- **按状态**：按注释状态排序
- **按位置**：按注释在文件中的位置排序

## 注释通知

### 通知类型

当以下情况发生时，您会收到通知：

- **新注释**：有新的注释添加
- **新回复**：您的注释收到新回复
- **状态更新**：注释状态被更新
- **被提及**：有人在注释中提及您

### 通知设置

您可以在设置中配置通知偏好：

- **通知方式**：选择通知方式（界面通知、邮件等）
- **通知频率**：选择实时或批量通知
- **通知过滤**：选择要接收的通知类型

## 最佳实践

### 添加注释

- **具体明确**：清楚地描述问题或建议
- **建设性**：提供有建设性的反馈
- **礼貌尊重**：保持礼貌和尊重
- **相关上下文**：提供足够的上下文

### 回复注释

- **及时响应**：及时回复收到的注释
- **感谢反馈**：感谢提供反馈的用户
- **解释决策**：解释接受或拒绝的原因

### 管理注释

- **定期清理**：定期清理已解决的注释
- **更新状态**：及时更新注释状态
- **归档记录**：归档重要的讨论记录

## 相关功能

- [提案概述](./overview.md) - 了解 OpenSpec 提案的基本概念
- [创建提案](./creating-proposals.md) - 了解如何创建提案
- [提案图表](./diagrams.md) - 了解提案的可视化功能
