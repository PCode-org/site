# 创建提案

了解如何在 PCode 中创建 OpenSpec 提案。

## 创建方式

### 通过会话列表创建

这是最常用的创建方式：

1. 在会话列表中点击 **提案** 按钮
2. 填写提案信息
3. 选择项目和工作区类型
4. 点击 **创建**

### 通过对话创建

在对话中，AI 可以帮助您创建提案：

1. 向 AI 描述您的变更需求
2. AI 会建议创建提案
3. 确认后自动创建提案

## 提案信息

### 提案标题

- **必填字段**：提案必须有标题
- **建议格式**：简洁、描述性的标题
- **示例**：
  - "添加用户认证功能"
  - "优化数据库查询性能"
  - "修复登录页面 Bug"

### 主要诉求 (Chief Complaint)

描述变更的主要原因或需求：

- **问题描述**：当前存在的问题
- **需求描述**：新的需求是什么
- **目标说明**：希望达成的目标
- **影响范围**：受影响的组件和功能

:::tip 提示

好的主要诉求应该：
- 清晰描述问题或需求
- 说明为什么需要这个变更
- 简要描述期望的结果

:::

### 项目选择

选择提案关联的项目：

- **必选字段**：必须选择一个项目
- **项目类型**：可以是本地或远程项目
- **影响**：提案将在选定项目的上下文中执行

### 工作区类型

#### 普通工作区

使用项目的默认工作区：

- **特点**：共享项目配置和分支
- **适用场景**：
  - 小型变更
  - 快速修复
  - 不需要隔离环境的变更

#### 独立工作区

为提案创建独立的工作区：

- **特点**：
  - 独立的 Git 分支
  - 隔离的开发环境
  - 独立的配置和依赖

- **适用场景**：
  - 大型功能开发
  - 需要长时间开发的变更
  - 需要隔离环境的实验性功能

### 基础分支

选择独立工作区的基础分支：

- **默认分支**：通常使用项目的默认分支
- **自定义分支**：可以选择其他分支作为基础
- **影响**：新分支将从选定的基础分支创建

## 创建流程

### 1. 打开创建对话框

点击会话列表中的 **提案** 按钮

### 2. 填写基本信息

- 输入提案标题
- 填写主要诉求
- 选择关联项目

### 3. 选择工作区类型

根据变更的性质选择合适的工作区类型

### 4. 配置工作区（如果选择独立工作区）

- 选择基础分支
- 配置工作区设置

### 5. 创建提案

点击 **创建** 按钮提交

### 6. 等待生成

系统会自动：

- 创建提案会话
- 分析提案内容
- 生成 OpenSpec 规范
- 创建提案图表

## 提案生成过程

创建提案后，系统会经历以下阶段：

### 优化中 (Optimizing)

系统正在优化提案内容：

- 分析提案需求
- 优化提案结构
- 生成改进建议

### 草稿 (Drafting)

提案内容正在草拟：

- 编写详细描述
- 创建实现方案
- 准备测试计划

### OpenSpec 处理中 (OpenSpecing)

正在生成 OpenSpec 规范：

- 生成规范文件
- 创建流程图
- 生成架构图

### 审查中 (Reviewing)

提案准备就绪，等待审查：

- 审查提案内容
- 添加注释反馈
- 讨论和改进

## 创建后的操作

提案创建后，您可以：

### 查看提案内容

1. 在会话列表中选择提案会话
2. 查看提案的基本信息
3. 阅读自动生成的提案内容

### 查看 OpenSpec 文件

1. 切换到 **OpenSpec 文件** 标签页
2. 查看生成的规范文件
3. 查看提案图表

### 添加注释

1. 切换到 **审查** 标签页
2. 在提案中添加注释
3. 参与讨论和改进

### 开始执行

1. 审查完成后，批准提案
2. 系统开始执行提案
3. 监控执行进度

## 最佳实践

### 撰写标题

- **简洁明了**：简短但描述性
- **包含关键词**：便于搜索和识别
- **使用动词**：描述要执行的动作

好的标题示例：
- ✅ "添加用户认证功能"
- ✅ "优化数据库查询性能"
- ✅ "修复登录页面响应慢的问题"

不好的标题示例：
- ❌ "更新代码"
- ❌ "修复问题"
- ❌ "一些改进"

### 撰写主要诉求

- **问题导向**：从问题描述开始
- **提供上下文**：说明背景和原因
- **明确目标**：清晰描述期望结果
- **适当详细**：提供足够的细节但不冗长

好的主要诉求示例：
```
当前系统的用户认证仅支持用户名密码方式，
用户反馈希望支持第三方登录（如 Google、GitHub）。
需要添加 OAuth 2.0 认证支持，提升用户体验。
```

### 选择工作区类型

- **小型变更**：使用普通工作区
- **大型功能**：使用独立工作区
- **实验性功能**：使用独立工作区
- **团队协作**：根据团队规范选择

## 故障排除

### 创建失败

如果提案创建失败：

1. **检查项目**：确保选择了有效的项目
2. **检查标题**：确保标题不为空
3. **检查网络**：确保网络连接正常
4. **查看错误**：查看详细的错误信息

### 生成卡住

如果提案生成卡在某个阶段：

1. **等待一段时间**：复杂的提案需要更多时间
2. **刷新页面**：尝试刷新页面
3. **重新生成**：尝试重新创建提案
4. **联系支持**：如果问题持续，联系技术支持

### 内容不完整

如果生成的提案内容不完整：

1. **提供更多细节**：在主要诉求中提供更多信息
2. **手动补充**：手动编辑和补充提案内容
3. **重新生成**：尝试调整描述后重新创建

## 相关功能

- [提案概述](./overview.md) - 了解 OpenSpec 提案的基本概念
- [提案图表](./diagrams.md) - 了解提案的可视化功能
- [注释功能](./annotations.md) - 了解如何在提案中添加注释
